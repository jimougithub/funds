<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./jquery-ui-1.12.1/jquery-ui.min.css">
<title>Fund Analysis</title>
</head>
<body>
<div id="search_box" style="height: 100px; width: 100%;">
<table border="0">
<tr>
	<td>Fund ID:</td>
	<td>
		<input type="text" id="id1" value="162605" maxlength="6" style="width: 60px;"/> 
		<input type="text" id="id2" value="000000" maxlength="6" style="width: 60px;"/> 
		<input type="text" id="id3" value="000000" maxlength="6" style="width: 60px;"/> 
		<input type="text" id="id4" value="000000" maxlength="6" style="width: 60px;"/> 
		<input type="text" id="id5" value="000000" maxlength="6" style="width: 60px;"/>
		<input type="text" id="id6" value="000000" maxlength="6" style="width: 60px;"/>
		<input type="text" id="id7" value="000000" maxlength="6" style="width: 60px;"/>
		<input type="text" id="id8" value="000000" maxlength="6" style="width: 60px;"/>
		<input type="text" id="id9" value="000000" maxlength="6" style="width: 60px;"/>
		<input type="text" id="id10" value="000000" maxlength="6" style="width: 60px;"/>
	</td>
</tr>
<tr>
	<td>Date Range:</td>
	<td>
		<input type="text" id="date_begin" value="20020101" maxlength="8" style="width: 60px;"/> 
		<input type="text" id="date_end" value="00000000" maxlength="8" style="width: 60px;"/> 
		<button type="button" id="button_search">Search</button>
	</td>
</tr>
<tr>
	<td>Compare value:</td>
	<td>
		<select id="yvalue">
			<option value="net_worth_pcent">累计收益率%</option>
			<option value="ac_worth">累计净值</option>
			<option value="net_worth">单位净值</option>
			<option value="ranking">同类排名</option>
		</select>
	</td>
</tr>
</table>
</div>

<div id="stockChartContainer" style="margin:0 auto; height: 100%; width: 100%;"></div>
<div id="div_fund_info" style="margin:0 auto; font-size:12px; width: 100%; margin-top:620px; margin-left:78px"></div>

<script src="./jquery/jquery-1.8.3.min.js"></script>
<script src="./canvasjs-stock-1.2.8/canvasjs.stock.min.js"></script>
<script src="./jquery-ui-1.12.1/jquery-ui.min.js"></script>
<script src="./js/utl.js"></script>
<script src="./js/chart.js"></script>
<script>
	$(function() {
		$("#date_begin").datepicker({
			dateFormat: 'yymmdd',
			showButtonPanel: true
		});
		$("#date_end").datepicker({
			dateFormat: 'yymmdd',
			showButtonPanel: true
		});
	});
	if (getCookie('date_begin')!=null){
		$('#date_begin').val(getCookie('date_begin'));
	}
	$('#date_end').val(format_yyyymmdd(new Date()));
	
	for (i=1; i <= 10; i++) {
		if (getCookie('id'+i)) $('#id'+i).val(getCookie('id'+i));
	}
	
	// search
	$('#button_search').click(function(){
		var date_begin=0, date_end=0;
		for (i=1; i<=10; i++){
			if ($('#id'+i).val().trim().trim()=='') {
				$('#id'+i).val('000000')
			}
		}
		if ($('#id1').val().trim().length != 6 || $('#id1').val().trim()=='000000') {
			alert('please input valid fund id');
			$('#id1').focus();
			return;
		}
		for (i=2; i<=10; i++){
			if ($('#id'+i).val().trim().length != 6) {
				alert('please input valid fund id');
				$('#id'+i).focus();
				return;
			}
		}
		var ids = $('#id1').val().trim();
		for (i=2; i<=10; i++){
			if ($('#id'+i).val().trim()!='000000')ids += ',' + $('#id'+i).val().trim();
		}
		
		for (i=1; i<=10; i++){
			setCookie('id'+i, $('#id'+i).val().trim(),365);
		}
		
		if ($('#date_begin').val().trim().length == 8 && $('#date_begin').val().trim()!="00000000") {
			date_begin = $('#date_begin').val().trim();
			setCookie('date_begin', date_begin,365);
		}
		if ($('#date_end').val().trim().length == 8 && $('#date_end').val().trim()!="00000000") {
			date_end = $('#date_end').val().trim();
		}
		load_fund_data(ids, date_begin, date_end);
	});
	
	// change y data
	$('#yvalue').on('change', function() {
		change_yvalue();
		create_chart();
	});
</script>
</body>
</html>
